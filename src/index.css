@import 'tailwindcss';

@theme {
  /* Custom Colors - Deeper, richer darks for that $599.99 feel */
  --color-background: oklch(5% 0.01 260); /* Slightly cooler dark */
  --color-glass: oklch(10% 0.02 260);
  --color-panel-bg: oklch(8% 0.02 260 / 0.7); 
  --color-panel-border: oklch(100% 0 0 / 0.08);
  --color-border: oklch(100% 0 0 / 0.08);

  --color-text-primary: oklch(98% 0 0);
  --color-text-secondary: oklch(75% 0.01 260);
  --color-text-tertiary: oklch(50% 0.01 260);

  --color-accent: var(--theme-accent, oklch(70% 0.14 200)); /* Cyan-ish default */
  --color-accent-glow: var(--theme-accent-glow, oklch(70% 0.14 200));

  /* Font Families */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', Menlo, Monaco, 'Courier New', monospace;

  /* Custom Animation */
  --animate-pulse-slow: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  --animate-spin-slow: spin 3s linear infinite;
  --animate-float: float 6s ease-in-out infinite;
  --animate-shimmer: shimmer 2s linear infinite;
  --animate-fade-in: fadeIn 0.5s ease-out forwards;
  --animate-scale-in: scaleIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  
  @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
  }

  @keyframes shimmer {
    from { background-position: 0 0; }
    to { background-position: -200% 0; }
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes scaleIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }
}

@layer base {
  :root {
    /* Theme accent colors - can be overridden by data-theme */
    --theme-accent: oklch(70% 0.14 200);
    --theme-accent-glow: oklch(70% 0.14 200);
  }

  [data-theme='green'] {
    --theme-accent: oklch(75% 0.18 145);
    --theme-accent-glow: oklch(75% 0.18 145);
  }

  [data-theme='magenta'] {
    --theme-accent: oklch(70% 0.22 330);
    --theme-accent-glow: oklch(70% 0.22 330);
  }

  [data-theme='orange'] {
    --theme-accent: oklch(75% 0.18 40);
    --theme-accent-glow: oklch(75% 0.18 40);
  }

  [data-theme='blue'] {
     --theme-accent: oklch(70% 0.14 260);
     --theme-accent-glow: oklch(70% 0.14 260);
  }

  [data-theme='rainbow'] {
    animation: rainbow 5s linear infinite;
    --theme-accent: oklch(70% 0.2 0); /* Start red */
    --theme-accent-glow: oklch(70% 0.2 0);
  }

  @keyframes rainbow {
    0% { --theme-accent: oklch(70% 0.2 0); --theme-accent-glow: oklch(70% 0.2 0); }
    20% { --theme-accent: oklch(70% 0.2 72); --theme-accent-glow: oklch(70% 0.2 72); }
    40% { --theme-accent: oklch(70% 0.2 144); --theme-accent-glow: oklch(70% 0.2 144); }
    60% { --theme-accent: oklch(70% 0.2 216); --theme-accent-glow: oklch(70% 0.2 216); }
    80% { --theme-accent: oklch(70% 0.2 288); --theme-accent-glow: oklch(70% 0.2 288); }
    100% { --theme-accent: oklch(70% 0.2 360); --theme-accent-glow: oklch(70% 0.2 360); }
  }

  body {
    background-color: var(--color-background);
    color: var(--color-text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow: hidden;
    letter-spacing: -0.015em; /* Slightly tighter for modern feel */
    font-feature-settings: "cv11", "ss01", "zero", "tnum"; /* Clean numbers & alts */
    
    /* Global subtle noise texture */
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
  }
  
  ::selection {
    background-color: color-mix(in oklch, var(--theme-accent) 30%, transparent);
    color: white;
    text-shadow: 0 0 8px var(--theme-accent-glow);
  }

  /* Custom Scrollbar - Minimal & Overlay */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-corner {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: oklch(100% 0 0 / 0.1);
    border-radius: 9999px;
    border: 2px solid transparent; 
    background-clip: content-box;
    transition: background-color 0.2s ease, transform 0.2s ease;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: oklch(100% 0 0 / 0.3);
    border-width: 1px;
  }

  /* Prevent text selection during resize drag */
  .resize-dragging {
    cursor: col-resize !important;
    -webkit-user-select: none !important;
    user-select: none !important;
  }

  .resize-dragging * {
    cursor: col-resize !important;
  }

  /* Keyboard Key Style */
  kbd {
    @apply font-mono text-xs px-1.5 py-0.5 rounded-md border border-b-2 border-white/10 bg-white/5 text-text-secondary;
  }

  /* Global Input Styling */
  input[type="text"],
  input[type="number"],
  input[type="password"],
  input[type="search"],
  input[type="email"],
  textarea,
  select {
    @apply glass-input rounded-md px-3 py-2 text-sm w-full;
  }
  
  /* Remove default number arrows for cleaner look */
  input[type="number"]::-webkit-inner-spin-button,
  input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
}

/* 
   PREMIUM GLASSMORPHISM SYSTEM 
*/

@utility glass-panel {
  background-color: oklch(8% 0.02 260 / 0.65);
  backdrop-filter: blur(24px) saturate(180%);
  /* Double border trick for depth */
  border: 1px solid oklch(100% 0 0 / 0.08);
  box-shadow: 
    0 4px 6px -1px oklch(0% 0 0 / 0.2),
    0 2px 4px -1px oklch(0% 0 0 / 0.1),
    inset 0 1px 0 0 oklch(100% 0 0 / 0.05), /* Inner Top Light */
    inset 0 0 0 1px oklch(100% 0 0 / 0.02); /* Inner Ring */
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

@utility glass-panel-dark {
  background-color: oklch(5% 0.01 260 / 0.85);
  backdrop-filter: blur(32px);
  border: 1px solid oklch(100% 0 0 / 0.05);
  box-shadow: inset 0 0 20px oklch(0% 0 0 / 0.3);
}

@utility glass-separator {
  height: 1px;
  background: linear-gradient(
    90deg, 
    transparent 0%, 
    oklch(100% 0 0 / 0.1) 20%, 
    oklch(100% 0 0 / 0.1) 80%, 
    transparent 100%
  );
  border: none;
}

@utility glass-input {
  background-color: oklch(0% 0 0 / 0.2);
  border: 1px solid oklch(100% 0 0 / 0.08);
  box-shadow: inset 0 1px 2px oklch(0% 0 0 / 0.1);
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  color: var(--color-text-primary);
  
  &:hover {
    border-color: oklch(100% 0 0 / 0.15);
    background-color: oklch(0% 0 0 / 0.25);
  }

  &:focus {
    outline: none;
    border-color: var(--theme-accent);
    background-color: oklch(0% 0 0 / 0.3);
    box-shadow: 
      inset 0 1px 2px oklch(0% 0 0 / 0.1),
      0 0 0 1px var(--theme-accent),
      0 0 12px -2px color-mix(in oklch, var(--theme-accent-glow) 30%, transparent);
  }
  
  &::placeholder {
    color: oklch(100% 0 0 / 0.2);
  }
}

@utility glass-button {
  position: relative;
  background: linear-gradient(to bottom, oklch(100% 0 0 / 0.08), oklch(100% 0 0 / 0.03));
  border: 1px solid oklch(100% 0 0 / 0.1);
  box-shadow: 
    0 1px 2px oklch(0% 0 0 / 0.1),
    inset 0 1px 0 0 oklch(100% 0 0 / 0.07),
    inset 0 0 0 1px oklch(100% 0 0 / 0.02);
  backdrop-filter: blur(8px);
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden;
  
  &:hover {
    background: linear-gradient(to bottom, oklch(100% 0 0 / 0.12), oklch(100% 0 0 / 0.06));
    border-color: oklch(100% 0 0 / 0.2);
    box-shadow: 
        0 4px 12px -2px oklch(0% 0 0 / 0.2),
        inset 0 1px 0 0 oklch(100% 0 0 / 0.1);
    transform: translateY(-0.5px);
  }
  
  &:active {
    background: oklch(0% 0 0 / 0.1);
    transform: translateY(0.5px);
    box-shadow: inset 0 2px 4px oklch(0% 0 0 / 0.1);
    border-color: oklch(100% 0 0 / 0.08);
  }
  
  /* Subtle shine effect on hover */
  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 50%;
    height: 100%;
    background: linear-gradient(
      90deg, 
      transparent, 
      oklch(100% 0 0 / 0.1), 
      transparent
    );
    transform: skewX(-20deg);
    transition: left 0.5s ease;
    pointer-events: none;
  }
  
  &:hover::after {
    left: 150%;
    transition: left 0.7s ease;
  }
}

@utility glass-button-primary {
  background: linear-gradient(135deg, color-mix(in oklch, var(--theme-accent) 25%, transparent), color-mix(in oklch, var(--theme-accent) 10%, transparent));
  border: 1px solid color-mix(in oklch, var(--theme-accent) 30%, transparent);
  box-shadow: 0 4px 12px color-mix(in oklch, var(--theme-accent-glow) 20%, transparent);

  &:hover {
    background: linear-gradient(135deg, color-mix(in oklch, var(--theme-accent) 35%, transparent), color-mix(in oklch, var(--theme-accent) 15%, transparent));
    border-color: color-mix(in oklch, var(--theme-accent) 50%, transparent);
    box-shadow: 0 0 20px color-mix(in oklch, var(--theme-accent-glow) 30%, transparent);
  }
}

@utility text-glow {
  text-shadow: 0 0 12px var(--theme-accent-glow);
}

@utility text-glow-subtle {
  text-shadow: 0 0 8px color-mix(in oklch, var(--theme-accent-glow) 40%, transparent);
}

@utility border-glow {
  box-shadow: 0 0 8px color-mix(in oklch, var(--theme-accent-glow) 15%, transparent);
}

@utility shimmer-text {
  background: linear-gradient(90deg, var(--color-text-secondary) 0%, white 50%, var(--color-text-secondary) 100%);
  background-size: 200% auto;
  color: transparent;
  background-clip: text;
  animation: shimmer 3s linear infinite;
}

@utility hover-card {
  transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s ease;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px -4px oklch(0% 0 0 / 0.3);
  }
}