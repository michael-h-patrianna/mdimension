@import 'tailwindcss';

@theme {
  /* Custom Colors - Deeper, richer darks */
  --color-background: oklch(5% 0.02 270);
  --color-glass: oklch(10% 0.02 270);
  --color-panel-bg: oklch(8% 0.03 270 / 0.6); /* Slightly more opaque for better contrast */
  --color-panel-border: oklch(100% 0 0 / 0.08);
  --color-border: oklch(100% 0 0 / 0.08);

  --color-text-primary: oklch(99% 0 0);
  --color-text-secondary: oklch(75% 0.01 270);
  --color-text-tertiary: oklch(50% 0.01 270);

  --color-accent: var(--theme-accent, oklch(75% 0.15 200));
  --color-accent-glow: var(--theme-accent-glow, oklch(75% 0.15 200));

  /* Font Families */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', Menlo, Monaco, 'Courier New', monospace;

  /* Custom Animation */
  --animate-pulse-slow: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  --animate-spin-slow: spin 3s linear infinite;
  --animate-float: float 6s ease-in-out infinite;
  
  @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
  }
}

@layer base {
  :root {
    /* Theme accent colors - can be overridden by data-theme */
    --theme-accent: oklch(75% 0.15 200);
    --theme-accent-glow: oklch(75% 0.15 200);
  }

  [data-theme='green'] {
    --theme-accent: oklch(80% 0.25 140);
    --theme-accent-glow: oklch(80% 0.25 140);
  }

  [data-theme='magenta'] {
    --theme-accent: oklch(70% 0.25 320);
    --theme-accent-glow: oklch(70% 0.25 320);
  }
}

/* 
   PREMIUM GLASSMORPHISM SYSTEM 
   The $599.99 Look
*/

@utility glass-panel {
  background-color: oklch(8% 0.03 270 / 0.85);
  backdrop-filter: blur(24px) saturate(180%);
  /* Sophisticated border gradient for depth */
  border: 1px solid transparent;
  background-image: 
    linear-gradient(oklch(8% 0.03 270 / 0.85), oklch(8% 0.03 270 / 0.85)), 
    linear-gradient(to bottom, oklch(100% 0 0 / 0.15), oklch(100% 0 0 / 0.05));
  background-origin: border-box;
  background-clip: padding-box, border-box;
  
  box-shadow: 
    0 25px 50px -12px oklch(0% 0 0 / 0.6),
    inset 0 1px 0 0 oklch(100% 0 0 / 0.1); /* Inner highlight */
}

@utility glass-separator {
  height: 1px;
  background: linear-gradient(
    90deg, 
    transparent 0%, 
    oklch(100% 0 0 / 0.1) 20%, 
    oklch(100% 0 0 / 0.1) 80%, 
    transparent 100%
  );
  border: none;
}

@utility glass-input {
  background-color: oklch(0% 0 0 / 0.3);
  border: 1px solid oklch(100% 0 0 / 0.1);
  box-shadow: inset 0 2px 4px oklch(0% 0 0 / 0.1);
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  
  &:hover {
    border-color: oklch(100% 0 0 / 0.2);
    background-color: oklch(0% 0 0 / 0.4);
  }

  &:focus {
    border-color: var(--theme-accent);
    background-color: oklch(0% 0 0 / 0.5);
    box-shadow: 
      inset 0 2px 4px oklch(0% 0 0 / 0.1),
      0 0 0 1px var(--theme-accent),
      0 0 15px color-mix(in oklch, var(--theme-accent-glow) 15%, transparent);
  }
}

@utility glass-button {
  background: linear-gradient(to bottom, oklch(100% 0 0 / 0.08), oklch(100% 0 0 / 0.03));
  border: 1px solid oklch(100% 0 0 / 0.1);
  border-top: 1px solid oklch(100% 0 0 / 0.2);
  box-shadow: 0 1px 2px oklch(0% 0 0 / 0.2);
  backdrop-filter: blur(4px);
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  
  &:hover {
    background: linear-gradient(to bottom, oklch(100% 0 0 / 0.12), oklch(100% 0 0 / 0.06));
    border-color: oklch(100% 0 0 / 0.25);
    transform: translateY(-0.5px);
    box-shadow: 0 4px 6px -1px oklch(0% 0 0 / 0.2);
  }
  
  &:active {
    background: oklch(0% 0 0 / 0.15);
    transform: translateY(0);
    box-shadow: inset 0 1px 2px oklch(0% 0 0 / 0.2);
  }
}

@utility text-glow {
  text-shadow: 0 0 12px var(--theme-accent-glow);
}

@utility text-glow-subtle {
  text-shadow: 0 0 8px color-mix(in oklch, var(--theme-accent-glow) 50%, transparent);
}

@utility border-glow {
  box-shadow: 0 0 10px color-mix(in oklch, var(--theme-accent-glow) 20%, transparent);
}

@utility hover-glow {
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 300ms;
  &:hover {
      box-shadow: 0 0 20px color-mix(in oklch, var(--theme-accent-glow) 40%, transparent);
      border-color: var(--theme-accent);
      transform: translateY(-1px);
  }
}

@layer base {
  body {
    background-color: var(--color-background);
    color: var(--color-text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow: hidden;
    letter-spacing: -0.015em; /* Tighter tracking for premium feel */
  }
  
  ::selection {
    background-color: color-mix(in oklch, var(--theme-accent) 30%, transparent);
    color: var(--color-text-primary);
    text-shadow: 0 0 8px var(--theme-accent-glow);
  }

  /* r3f-perf Performance Monitor Theming - keeping mostly same but aligned */
  .perf-monitor {
    --perf-bg-color: oklch(8% 0.03 270 / 0.9);
    --perf-text-color: oklch(98% 0 0);
    --perf-chart-bg-color: oklch(5% 0.02 270 / 0.8);
    font-family: var(--font-mono) !important;
    backdrop-filter: blur(16px);
    border: 1px solid oklch(100% 0 0 / 0.1) !important;
    border-radius: 8px !important;
    box-shadow: 0 10px 40px oklch(0% 0 0 / 0.5) !important;
    z-index: 5 !important;
  }

  .perf-monitor b {
    color: var(--theme-accent) !important;
  }

  .perf-monitor i {
    color: oklch(70% 0.01 270) !important;
  }

  /* Custom Scrollbar - Minimal & Overlay */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-corner {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: oklch(100% 0 0 / 0.1);
    border-radius: 9999px;
    border: 2px solid transparent; /* Creates internal padding */
    background-clip: content-box;
    transition: background-color 0.2s;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: oklch(100% 0 0 / 0.3);
  }

  /* Prevent text selection during resize drag */
  .resize-dragging {
    cursor: col-resize !important;
    -webkit-user-select: none !important;
    user-select: none !important;
  }

  .resize-dragging * {
    cursor: col-resize !important;
  }
}
