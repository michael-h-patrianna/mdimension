@import 'tailwindcss';

@theme {
  /* Custom Colors */
  --color-background: oklch(6% 0.02 270);
  --color-glass: oklch(10% 0.02 270);
  --color-panel-bg: oklch(10% 0.02 270 / 0.5);
  --color-panel-border: oklch(100% 0 0 / 0.1);
  --color-border: oklch(100% 0 0 / 0.1);

  --color-text-primary: oklch(98% 0 0);
  --color-text-secondary: oklch(70% 0.01 270);
  --color-text-tertiary: oklch(55% 0.01 270);

  --color-accent: var(--theme-accent, oklch(75% 0.15 200));
  --color-accent-glow: var(--theme-accent-glow, oklch(75% 0.15 200));

  /* Font Families */
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', Menlo, Monaco, 'Courier New', monospace;

  /* Custom Animation */
  --animate-pulse-slow: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  --animate-spin-slow: spin 3s linear infinite;
  --animate-float: float 6s ease-in-out infinite;
  
  @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
  }
}

@layer base {
  :root {
    /* Theme accent colors - can be overridden by data-theme */
    --theme-accent: oklch(75% 0.15 200);
    --theme-accent-glow: oklch(75% 0.15 200);
  }

  [data-theme='green'] {
    --theme-accent: oklch(80% 0.25 140);
    --theme-accent-glow: oklch(80% 0.25 140);
  }

  [data-theme='magenta'] {
    --theme-accent: oklch(70% 0.25 320);
    --theme-accent-glow: oklch(70% 0.25 320);
  }
}

@utility glass-panel {
  background-color: oklch(10% 0.02 270 / 0.75);
  backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid oklch(100% 0 0 / 0.08);
  border-top: 1px solid oklch(100% 0 0 / 0.15);
  box-shadow: 
    0 25px 50px -12px oklch(0% 0 0 / 0.5),
    inset 0 0 0 1px oklch(100% 0 0 / 0.05);
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
}

@utility glass-input {
  background-color: oklch(5% 0.02 270 / 0.4);
  border: 1px solid oklch(100% 0 0 / 0.1);
  box-shadow: inset 0 1px 2px oklch(0% 0 0 / 0.2);
  transition: all 0.2s ease;
  
  &:focus {
    border-color: var(--theme-accent);
    box-shadow: 
      inset 0 1px 2px oklch(0% 0 0 / 0.2),
      0 0 0 1px var(--theme-accent),
      0 0 15px color-mix(in oklch, var(--theme-accent-glow) 20%, transparent);
  }
}

@utility glass-button {
  background: linear-gradient(to bottom, oklch(100% 0 0 / 0.05), oklch(100% 0 0 / 0.01));
  border: 1px solid oklch(100% 0 0 / 0.1);
  border-top: 1px solid oklch(100% 0 0 / 0.2);
  box-shadow: 0 1px 2px oklch(0% 0 0 / 0.2);
  backdrop-filter: blur(4px);
  
  &:hover {
    background: linear-gradient(to bottom, oklch(100% 0 0 / 0.1), oklch(100% 0 0 / 0.05));
    border-color: oklch(100% 0 0 / 0.2);
  }
  
  &:active {
    background: oklch(0% 0 0 / 0.1);
    box-shadow: inset 0 1px 2px oklch(0% 0 0 / 0.2);
  }
}

@utility text-glow {
  text-shadow: 0 0 12px var(--theme-accent-glow);
}

@utility border-glow {
  box-shadow: 0 0 10px color-mix(in oklch, var(--theme-accent-glow) 20%, transparent);
}

@utility hover-glow {
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 300ms;
  &:hover {
      box-shadow: 0 0 20px color-mix(in oklch, var(--theme-accent-glow) 40%, transparent);
      border-color: var(--theme-accent);
      transform: translateY(-1px);
  }
}

@layer base {
  body {
    background-color: var(--color-background);
    color: var(--color-text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow: hidden;
    letter-spacing: -0.01em; /* Subtle tracking tightening for modern feel */
  }
  
  ::selection {
    background-color: color-mix(in oklch, var(--theme-accent) 30%, transparent);
    color: var(--color-text-primary);
    text-shadow: 0 0 8px var(--theme-accent-glow);
  }

  /* r3f-perf Performance Monitor Theming */
  .perf-monitor {
    --perf-bg-color: oklch(10% 0.02 270 / 0.9);
    --perf-text-color: oklch(98% 0 0);
    --perf-chart-bg-color: oklch(6% 0.02 270 / 0.8);
    font-family: var(--font-mono) !important;
    backdrop-filter: blur(16px);
    border: 1px solid oklch(100% 0 0 / 0.1) !important;
    border-radius: 8px !important;
    box-shadow: 0 10px 40px oklch(0% 0 0 / 0.5) !important;
    z-index: 5 !important;
  }

  .perf-monitor b {
    color: var(--theme-accent) !important;
  }

  .perf-monitor i {
    color: oklch(70% 0.01 270) !important;
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar {
    width: 5px; /* Thinner */
    height: 5px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-corner {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: oklch(100% 0 0 / 0.15);
    border-radius: 9999px;
    border: 1px solid transparent; /* Creates padding around thumb */
    background-clip: content-box;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: oklch(100% 0 0 / 0.3);
  }

  /* Prevent text selection during resize drag */
  .resize-dragging {
    cursor: col-resize !important;
    -webkit-user-select: none !important;
    user-select: none !important;
  }

  .resize-dragging * {
    cursor: col-resize !important;
  }
}
